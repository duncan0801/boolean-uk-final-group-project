// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  shadowDatabaseUrl =env("SHADOW_URL")
}

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["referentialActions"]
}

model User {
  id Int @id @default(autoincrement())
  firstName String 
  lastName String 
  avatar String
  userName String @unique
  password String
  counsellor_ID Int
  appointments Appointment [] 
  messages Message []
  reviews Review []
}

model Counsellor {
  id Int @id @default(autoincrement())
  firstName String 
  lastName String 
  about String
  licensing String
  avatar String
  hourlyRate Int
  appointments Appointment []
  messages Message []
  reviews Review []
  specialities CounsellorOnService []
}

model Service {
  id Int @id @default(autoincrement())
  name String
  counsellors CounsellorOnService []
}

model CounsellorOnService {
  id Int @id @default(autoincrement())
  counsellor_ID Int
  service_ID Int
  counsellor Counsellor @relation(fields: [counsellor_ID], references: [id], onDelete: Cascade)
  service Service @relation(fields: [service_ID], references: [id], onDelete: Cascade)
}

model Review {
  id Int @id @default(autoincrement())
  date DateTime @db.Date 
  content String
  user_ID Int
  counsellor_ID Int
  user User @relation(fields: [user_ID], references: [id], onDelete: Cascade)
  counsellor Counsellor @relation(fields: [counsellor_ID], references: [id], onDelete: Cascade)
}

model Message {
  id Int @id @default(autoincrement())
  date DateTime @db.Date 
  content String
  user_ID Int
  counsellor_ID Int
  user User @relation(fields: [user_ID], references: [id], onDelete: Cascade)
  counsellor Counsellor @relation(fields: [counsellor_ID], references: [id], onDelete: Cascade)
}

model Appointment {
  id Int @id @default(autoincrement())
  date DateTime @db.Date 
  time DateTime @db.Time()
  user_ID Int
  counsellor_ID Int
  user User @relation(fields: [user_ID], references: [id], onDelete: Cascade)
  counsellor Counsellor @relation(fields: [counsellor_ID], references: [id], onDelete: Cascade)
}

model FAQ {
   id Int @id @default(autoincrement())
   question String
   answer String
}